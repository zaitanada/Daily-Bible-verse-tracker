import streamlit as stimport sqlite3import pandas as pdfrom datetime import datetime, timedelta# --- 1. DATABASE SETUP ---def init_db():    conn = sqlite3.connect('faith_journal.db')    c = conn.cursor()    c.execute('''        CREATE TABLE IF NOT EXISTS entries (            id INTEGER PRIMARY KEY AUTOINCREMENT,            user_name TEXT NOT NULL,            verse_text TEXT NOT NULL,            created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP        )    ''')    conn.commit()    conn.close()def add_verse(name, verse):    conn = sqlite3.connect('faith_journal.db')    c = conn.cursor()    c.execute('INSERT INTO entries (user_name, verse_text) VALUES (?, ?)', (name, verse))    conn.commit()    conn.close()def get_weekly_verses():    conn = sqlite3.connect('faith_journal.db')    one_week_ago = (datetime.now() - timedelta(days=7)).strftime('%Y-%m-%d %H:%M:%S')    query = f"SELECT user_name, verse_text, created_at FROM entries WHERE created_at >= '{one_week_ago}' ORDER BY created_at DESC"    df = pd.read_sql_query(query, conn)    conn.close()    return df# --- 2. USER INTERFACE ---def main():    st.set_page_config(page_title="Verse Tracker", page_icon="??")    init_db()    # Create a Navigation Menu in the Sidebar    st.sidebar.title("Navigation")    page = st.sidebar.radio("Go to:", ["Submit Your Verse", "Weekly Collation"])    # --- PAGE 1: SUBMIT ONLY ---    if page == "Submit Your Verse":        st.title("?? Submit Today's Verse")        st.markdown("Share your favorite scripture with the group.")                # The Form is now in the main center area for easy typing        with st.form("verse_form", clear_on_submit=True):            name = st.text_input("Your Name")            verse = st.text_area("Verse of the Day", height=150)            submitted = st.form_submit_button("Save Verse")                        if submitted:                if name and verse:                    add_verse(name, verse)                    st.success(f"Amen! Verse saved for {name}.")                else:                    st.error("Please fill in both name and verse.")    # --- PAGE 2: VIEW ONLY ---    elif page == "Weekly Collation":        st.title("??? Weekly Summary")        st.markdown("Here is what everyone has been reading this week.")                data = get_weekly_verses()        if data.empty:            st.info("No verses submitted yet this week.")        else:            # Grouping by name            names = data['user_name'].unique()            for name in names:                with st.expander(f"?? {name}'s Collection", expanded=True):                    user_data = data[data['user_name'] == name]                    for idx, row in user_data.iterrows():                        dt = datetime.strptime(row['created_at'], '%Y-%m-%d %H:%M:%S')                        st.caption(f"{dt.strftime('%A, %B %d')}")                        st.write(row['verse_text'])                        st.divider()if __name__ == "__main__":    main()